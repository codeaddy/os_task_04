# Домашнее задание по ОС #4
## Сизикин Владислав Олегович (БПИ218), Вариант 1

## Задача:
    Задача о парикмахере. В тихом городке есть парикмахерская. Салон парикмахерской мал, работать в нем нем может только один парикмахер, обслуживающий одного посетителя. Есть несколько кресел для ожидания в очереди. Парикмахер всю жизнь обслуживает посетителей. Когда в салоне никого нет, он спит в кресле. Когда посетитель приходит и видит спящего парикмахера, он будет его, садится в кресло, «засыпая» на тот момент, пока парикмахер обслуживает его. Если посетитель приходит, а парикмахер занят, то он встает в очередь и «засыпает». После стрижки парикмахер сам провожает посетителя. Если есть ожидающие посетители, то парикмахер будит одного из них и ждет пока тот сядет в кресло парикмахера и начинает стрижку. Если никого нет, он снова садится в свое кресло и засыпает до прихода посетителя. Создать приложение, моделирующее рабочий день парикмахерской. Парикмахера и каждого из посетителей моделировать в виде отдельных процессов. Последние могут независимо порождаться в произвольное время и завершать работу после обслуживания.
    
## Компиляция:
    gcc mark4_server.c -o server -lpthread
    gcc mark4_client.c -o client
    ...
    gcc mark7_observer.c -o observer

    Также же для каждой оценки есть скрипт с комплияцией и запуском программ (в пвпке code)
    
## Запуск:

    Каждая программа запускается с использованием параметров командной строки (передаем адрес и порт)
    
    Например,
    
    /.server 127.0.0.1 8080
    /.client 127.0.0.1 8080
    /.observer 127.0.0.1 8080

## Выходные данные: 

Во время работы программа выводит логи в консоль, чтобы понимать, что происходит в текущий момент времени.

# 5 баллов
В файлах [mark5_server.c](code/mark5_server.c), [mark5_client.c](code/mark5_client.c) находится решение задачи.

Используются сокеты и UDP-протокол

Результат одного из запусков - ![](imgs/mark5.png)

Сервер регулирует работу барбера - если клентов нет, то барбер спит, иначе же барбер начинает стричь клиента.

Процесс клиента симулирует, соответственно, клиента. Если в комнате ожидания есть место - клиент занимает место, иначе - уходит.

Размер комнаты ожидания я решил поставить равным 5.

Завершение работы сервера происходит корректно при нажатиия Ctrl+C в терминале (консоли), так как добавлен обработчек сигнала SIGINT

# 7 баллов
В файлах [mark7_server.c](code/mark7_server.c), [mark7_client.c](code/mark7_client.c), [mark7_observer.c](code/mark7_observer.c) находится решение задачи.

Отредактирован код сервера, добавлена переменная для счетчика обслуженных клиентов

Написан код наблюдателя, он подключается к серверу и выводит информацию о количестве клиентов в очереди в момент отправки запроса серверу.

Результат одного из запусков - ![](imgs/mark7.png)

# 8 баллов
В скрипте [mark8_script_ubuntu.sh](code/mark8_script_ubuntu.sh) продемонстрировано требуемое условие - возможность подключения множества клиентов, обеспечивающих отображение информации о работе приложения.

Запускаются сразу три обсервера.

Результат одного из запусков - ![](imgs/mark8.png)

# 9 баллов
В скрипте [mark9_script_ubuntu.sh](code/mark9_script_ubuntu.sh) продемонстрировано требуемое условие - приложение, позволяющее отключать и подключать различных клиентов с сохранением работоспособности сервера.

В скрипте в разном порядке подключаются клиенты и наблюдатели, прерывание работы клиента или наблюдателя не нарушает работы сервера, все продолжает выполняться корректно.

Результат одного из запусков - ![](imgs/mark9.png)